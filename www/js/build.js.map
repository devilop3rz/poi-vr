{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app/scripts/app.js","app/scripts/modules/poivr/poivr.js","app/scripts/modules/poivr/poivr.object.js","app/scripts/services/geoservice.js"],"names":[],"mappings":"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","file":"build.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\r\n'use strict';\r\n\r\nimport {PoiVr} from './modules/poivr/poivr.js';\r\n\r\nclass App {\r\n    constructor() {\r\n        console.log('Starting App');\r\n        var poiVr = new PoiVr();\r\n        poiVr.setupEnviroment();\r\n\r\n        poiVr.createPoiObject({position: [51,10], img: 'img/joker.png'});\r\n        poiVr.createPoiObject({position: [51, 8], img: 'img/joker.png'});\r\n        poiVr.createPoiObject({position: [52,9], img: 'img/joker.png'});\r\n    }\r\n}\r\n\r\n\r\nvar app = new App();","\r\n'use strict';\r\n\r\nimport {PoiObject} from './poivr.object.js';\r\nimport {Geoservice} from '../../services/geoservice.js';\r\n       \r\nexport class PoiVr {\r\n\r\n    constructor () {\r\n        console.log('PoiVr initialized');\r\n        this.poiObjects = [];\r\n        this.geoService = new Geoservice();\r\n    }\r\n\r\n    setupEnviroment () {\r\n        var light, spotLight;\r\n\r\n        this.scene = new THREE.Scene();\r\n\r\n        this.camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );\r\n        this.camera.position.z = 0;\r\n        this.camera.position.y = 2;\r\n\r\n        this.renderer = new THREE.WebGLRenderer();\r\n        this.renderer.setSize( window.innerWidth, window.innerHeight );\r\n        this.renderer.shadowMapType = THREE.PCFSoftShadowMap;\r\n        this.renderer.shadowMapEnabled = true;\r\n        this.renderer.setClearColor( 0xffffff, 1 );\r\n        document.querySelector('.app').appendChild(this.renderer.domElement);\r\n\r\n        this.controls = new DeviceOrientationController( this.camera, this.renderer.domElement );\r\n        this.controls.connect();\r\n\r\n        // Lightning\r\n\r\n        light = new THREE.AmbientLight( 0x404040 ); // soft white light\r\n        this.scene.add( light );\r\n\r\n        spotLight = new THREE.SpotLight( 0xffffff );\r\n        spotLight.position.set( 100, 1000, 100 );\r\n        spotLight.castShadow = true;\r\n        spotLight.shadowMapWidth = 1024;\r\n        spotLight.shadowMapHeight = 1024;\r\n        spotLight.shadowCameraNear = 500;\r\n        spotLight.shadowCameraFar = 4000;\r\n        spotLight.shadowCameraFov = 30;\r\n\r\n        this.scene.add( spotLight );\r\n\r\n        // Floor\r\n        var floor = new THREE.Mesh( new THREE.PlaneGeometry( 1000, 1000, 1, 1 ), new THREE.MeshLambertMaterial( { color: 0x0000ff } ) );\r\n        floor.material.side = THREE.DoubleSide;\r\n        floor.rotation.x = 1.5708;\r\n        floor.receiveShadow = true;\r\n        this.scene.add( floor );\r\n\r\n        this.render();\r\n    }\r\n\r\n    createPoiObject(poiData = {position:0, img: ''}) {\r\n\r\n        this.geoService.getPosition().then((data) => {\r\n            poiData.rotation = this.geoService.getBearing(data, poiData.position);\r\n            var poi = new PoiObject(poiData);\r\n            this.scene.add(poi.mesh);\r\n            this.poiObjects.push(poi);\r\n        });\r\n        \r\n    }\r\n\r\n    render () {\r\n        this.controls.update();\r\n        requestAnimationFrame( () =>{\r\n            this.render();\r\n        });\r\n        this.renderer.render( this.scene, this.camera );\r\n    }\r\n\r\n}","\r\n'use strict';\r\n\r\nexport class PoiObject {\r\n    constructor (poiData) {\r\n\r\n        var geometry, material, texture;\r\n        \r\n        console.log(poiData)\r\n\r\n        geometry = new THREE.BoxGeometry( 0.1, 1, 1);\r\n        geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 10, 0, 0 ));\r\n\r\n        texture = THREE.ImageUtils.loadTexture(poiData.img, {}, () => {\r\n            this.mesh.scale.y = texture.image.height / 100;\r\n            this.mesh.scale.z = texture.image.width / 100;\r\n        });\r\n\r\n        material =  new THREE.MeshLambertMaterial({map: texture});\r\n\r\n        this.mesh = new THREE.Mesh( geometry, material);\r\n        this.mesh.castShadow = true;\r\n        this.mesh.rotation.y =  poiData.rotation * Math.PI / 180;\r\n        this.mesh.moveUp = true;\r\n        this.mesh.maxY = 4;\r\n\r\n    }\r\n\r\n}","\r\n'use strict';\r\n\r\nexport class Geoservice {\r\n    constructor () {\r\n\r\n    }\r\n\r\n    getPosition () {\r\n        return new Promise((resolve) => {\r\n            navigator.geolocation.getCurrentPosition((data) => {\r\n                resolve ([data.coords.latitude, data.coords.longitude]);\r\n            });\r\n        });\r\n        \r\n    }\r\n\r\n    getBearing (start, end) {\r\n\r\n        var radient, phi1, phi2, lam1, lam2, bearing;\r\n      \r\n        radient = Math.PI/180.0;\r\n\r\n        phi1= start[0] * radient;\r\n        phi2= end[0] * radient;\r\n        lam1= start[1] * radient;\r\n        lam2= end[1] * radient;\r\n      \r\n        bearing = Math.atan2(Math.sin(lam2 - lam1) * Math.cos(phi2),\r\n          Math.cos(phi1) * Math.sin(phi2) - Math.sin(phi1) * Math.cos(phi2) * Math.cos(lam2 - lam1)\r\n        ) * 180 / Math.PI;\r\n\r\n        return (bearing + 360) % 360;\r\n    }\r\n}"]}